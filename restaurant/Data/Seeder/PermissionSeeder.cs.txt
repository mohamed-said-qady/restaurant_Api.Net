using restaurant.Authorization;
using restaurant.Data;
using restaurant.Model;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;

namespace restaurant.Seeders
{
    public class PermissionSeeder
    {
        private readonly AppDbContext _context;

        public PermissionSeeder(AppDbContext context)
        {
            _context = context;
        }

        public async Task SeedAsync()
        {
            if (_context.Permissions.Any())
                return;

            var permissions = new List<Permission>
            {
                new Permission { Code = Permissions.OrderCreate },
                new Permission { Code = Permissions.OrderUpdate },
                new Permission { Code = Permissions.OrderView },

                new Permission { Code = Permissions.ProductCreate },
                new Permission { Code = Permissions.ProductUpdate },
                new Permission { Code = Permissions.ProductView }
            };

            _context.Permissions.AddRange(permissions);
            await _context.SaveChangesAsync();
        }
    }
}
